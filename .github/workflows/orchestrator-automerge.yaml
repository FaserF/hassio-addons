name: Orchestrator Auto-Merge

on:
  pull_request_target:
    types:
      - opened
      - synchronize
      - reopened
      - edited
      - labeled
      - ready_for_review
  check_suite:
    types:
      - completed
  status: {}

jobs:
  auto-merge:
    runs-on: ubuntu-latest
    if: |
      (github.event_name == 'check_suite' && github.event.check_suite.conclusion == 'success') ||
      (github.event_name == 'status' && github.event.state == 'success') ||
      (github.event_name == 'pull_request_target')
    steps:
      - name: ðŸ¤– Auto-Merge Dependabot/Renovate/FaserF
        uses: ahmadnassri/action-dependabot-auto-merge@v2.6
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          command: 'squash'
          target: 'minor' # Merge minor/patch updates automatically
          # Additional check: only if author is trusted
        if: |
            github.actor == 'dependabot[bot]' ||
            github.actor == 'renovate[bot]' ||
            github.actor == 'FaserF'
